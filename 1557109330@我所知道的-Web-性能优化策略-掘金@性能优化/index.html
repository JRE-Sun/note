
<!DOCTYPE html>
<html>
  <!-- OriginalSrc: https://juejin.im/post/5c95ee3bf265da610a56ef9a -->
  <head>
    <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>我所知道的 Web 性能优化策略 - 掘金@性能优化</title>
    
<link rel="stylesheet" href="assets/1557109330-1f9e0f727e6a99422a0a1f6e2139bd56.css">

<link rel="stylesheet" href="assets/1557109330-39cb236590c2d7f28116c42fb1c4858a.css">

<link href="assets/1557109330-883defa5388981e6f49116c12e7b8a2a.css" rel="stylesheet">
<style>
body {
        font-size: 16px;
        line-height: 2;
      }
      a, button, input {
        margin: 1rem 1.5rem;
      }
      img {
        width: 0;
        height: 0;
      }
      #juejin {
        overflow-x: hidden;
      }
</style>
<style>

</style>
<style>

:root .sidebar-bd-entry,
:root .topbanner,
:root .container > a.mid-wrapper,
:root .content > a > .topline
{ display: none !important; }
</style>
<style>
object,embed{                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;                -o-animation-duration:.001s;-o-animation-name:playerInserted;                animation-duration:.001s;animation-name:playerInserted;}                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}
</style>
<style>
#rwl-iqxin{position:fixed;transform:translate(-90px,0);width:85px;height:25px;font-size:12px;font-weight: 500;font-family:Verdana, Arial, '宋体';color:#fff;background:#333;z-index:2147483647;margin: 0;opacity:0.05;transition:0.3s;overflow:hidden;user-select:none;text-align:center;white-space:nowrap;line-height:25px;padding:0 16px;border:1px solid #ccc;border-width:1px 1px 1px 0;border-bottom-right-radius:5px;box-sizing: content-box;}#rwl-iqxin input{margin: 0;padding: 0;vertical-align:middle;-webkit-appearance:checkbox;-moz-appearance:checkbox;position: static;clip: auto;opacity: 1;cursor: pointer;}#rwl-iqxin.rwl-active-iqxin{left: 0px;transform:translate(0,0);opacity: 0.9;height: 32px;line-height: 32px}#rwl-iqxin label{margin:0;padding:0;font-weight:500;}#rwl-iqxin button{margin: 0;padding: 0 2px;border: none;border-radius: 2px;cursor: pointer;}#rwl-setMenu{text-align:left;font-size:14px;z-index:999999;border: 1px solid cornflowerblue;}#rwl-setMenu p{margin:5px auto;} 
</style>
<style>
#leftdiv,#rightdiv,#stickey_footer,#top_box,.ershiba,.recommend-box,.floatBottom img,.ad_float_left,body .img,.side-widget,.blog-post  .row .side,.content__tech,.bui-left.index-left{display:none!important;}<br>.box.pic_text img,#wp img,#postlist img{max-height: 400px;width: auto;}<br>.post-topheader__info--title{text-align: center;}<br>.blog-post  .row .main,.container.main-container .container,.main-area.article-area{width: 100%;max-width: 100%;}<br><br>#juejin .container{max-width:1140px;}<br><br>.container.main-container .sidebar,.container.main-container .article-suspended-panel,.global-component-box .suspension-panel{display:none!important;}<br>
</style>

    <style class="mx-wc-style">
      .mx-wc-main img {max-width: 100%;}
      .mx-wc-main{
        background-color: rgb(244, 245, 245) !important;
        margin: 0 auto;
        min-width: 100%!important;
        max-width: 100%!important;
        width: 100%!important;
        padding: 15px!important;
        box-sizing: border-box;
      }
      .mx-wc-main .single .content{border:none!important;}
      .mx-wc-main .show-content .image-package{margin-left:0!important;}
      code{white-space:pre-wrap!important;}

      .clipping-information{
        text-align: left;
        margin-top: 20px;
        background-color: #eeeeee !important;
        padding: 15px;
        border-radius: 4px;
        color: #333;
        font-size: 14px !important;
        line-height: 22px !important;
      }
      .clipping-information a {
        color: blue !important;
        text-decoration: underline !important;
      }
      .clipping-information label {
        display: inline;
        text-transform: none;
      }
      .clipping-information label > code {
        padding: 2px 8px;
        background-color: rgba(200, 200, 200, 0.7)!important;
        font-size: 14px;
      }

    </style>
  </head>
  <body style="background-color: #464646 !important;min-height:100%;min-width:100%!important;max-width:100%!important;width:100%!important; height: auto;" id="" class="">
    <div class="mx-wc-main">
      <DIV id="juejin" data-v-514f306c="" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><DIV data-v-4b868639="" data-v-4a12c3f3="" data-v-514f306c="" class="view-container" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><MAIN data-v-4b868639="" class="container main-container" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><DIV data-v-4a12c3f3="" data-v-4b868639="" class="view column-view" style="display: block; float: none; position: relative; top: 0; left: 0; border: 0px; width: 100%; min-width:100%; max-width: 100%; min-height: auto; max-height: 100%; height: auto; padding: 0px; margin: 0px;"><div data-v-4a12c3f3="" data-v-4b868639="" class="main-area article-area shadow mx-wc-selected-elem" style="float: none; position: relative; top: 0px; left: 0px; margin: 0px; flex: unset; width: 100%; max-width: 100%; box-sizing: border-box;"><article data-v-4a12c3f3="" itemscope="itemscope" itemtype="http://schema.org/Article" class="article" data-v-4b868639=""><div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"></div><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"></div></div><div data-v-4a12c3f3="" class="author-info-block"><a data-v-4a12c3f3="" href="https://juejin.im/user/57599573df0eea00646b12ae" target="_blank" rel="" class="avatar-link"><div data-v-acf63380="" data-v-37d9a154="" data-v-4a12c3f3="" data-src="https://mirror-gold-cdn.xitu.io/168e082b07ab973ff68?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://mirror-gold-cdn.xitu.io/168e082b07ab973ff68?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a><div data-v-4a12c3f3="" class="author-info-box"><a data-v-4a12c3f3="" href="https://juejin.im/user/57599573df0eea00646b12ae" target="_blank" rel="" class="username ellipsis">rccoder</a><div data-v-4a12c3f3="" class="meta-box"><time data-v-4a12c3f3="" datetime="2019-03-24T11:50:58.616Z" title="Sun Mar 24 2019 19:50:58 GMT+0800 (中国标准时间)" class="time">2019年03月24日</time><span data-v-4a12c3f3="" class="views-count">阅读 1262</span><!----></div></div><button data-v-2fe230ac="" data-v-4a12c3f3="" class="follow-button follow">关注</button></div><div data-v-acf63380="" data-v-21eddaa6="" data-v-4a12c3f3="" data-src="https://user-gold-cdn.xitu.io/2019/3/24/169af8a0e43ee175?imageView2/1/w/1304/h/734/q/85/format/webp/interlace/1" class="lazy thumb article-hero loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/3/24/169af8a0e43ee175?imageView2/1/w/1304/h/734/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><h1 data-v-4a12c3f3="" class="article-title">我所知道的 Web 性能优化策略</h1><div data-v-4a12c3f3="" data-id="5c976f22f265da611846b34e" itemprop="articleBody" class="article-content"><h2 class="heading" data-id="heading-0">前言</h2>
<p>本文核心分为两部分，第一部分讲述普通浏览器中能干的事情，第二部分则讲述在自建容器的背景下更能干的事情。</p>
<p>文章内容会比较粗略，如果你对具体实现感兴趣，欢迎在 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Frccoder%2Fblog%2Fissues%2F34" rel="nofollow noopener noreferrer">这</a> 留言。</p>
<h2 class="heading" data-id="heading-1">一、止步于浏览器</h2>
<p><a name="f4ee0a9b"></a></p>
<h4 class="heading" data-id="heading-2">1.1 DNS Prefetch</h4>
<p>通常情况下，一个 html bundle 里面一般会有 script 等标签去加载其他的资源。浏览器在加载完 html 之后，就会去加载 script 等标签里面的内容，大多情况下，这种标签里 uri 的 host 和当前页面的往往是不相同的，那就会涉及到 DNS 解析的问题，会有一定程度的损耗。</p>
<p>在 HTML 里面加入 DNS Prefetch 则会让浏览器提前进行 DNS 的解析并且缓存到系统中，这样就可以提升网页的加载效率了。</p>
<pre><code class="hljs bash copyable" lang="bash">&lt;link rel=<span class="hljs-string">"dns-prefetch"</span> href=<span class="hljs-string">"//img.alicdn.com"</span>&gt;
<span class="copy-code-btn">复制代码</span></code></pre><p><a name="3a180ad1"></a></p>
<h4 class="heading" data-id="heading-3">1.2 域名收敛</h4>
<p>在像 v2ex 这样的社区论坛中，往往会有很多用户外链图片，不同的图片有不同的域名。这个时候 DNS Prefetch 会显得很无力，如果说在图片上传之后做一定的 转化 或者 同步，把域名收敛到同一个域名中，这样就能弥补相关的缺憾了。</p>
<pre><code class="hljs bash copyable" lang="bash">aaa.com/jjj.png -&gt;  mycdn.com/aaa/jjj.png
bbb.com/jjj.png -&gt;  mycdn.com/bbb/jjj.png
<span class="copy-code-btn">复制代码</span></code></pre><p><a name="cf08ddaa"></a></p>
<h4 class="heading" data-id="heading-4">1.3 加载合适的图片</h4>
<p>同一个图片在 在不同的设备、不同的网络条件、不同的渲染面积下，统一加载一样的尺寸难免是 “奢侈” 的，利用 CDN 裁剪 + 前端嗅探 去加载不同体积、不同压缩比率、不同格式的图片，能在节省不少流量的同时提升很大的性能。</p>
<p>目前主流 CDN / OSS 都是支持通过 URL 后缀进行图片裁剪的，比如：<a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F44693.html" rel="nofollow noopener noreferrer">阿里云</a>：</p>
<pre><code class="hljs bash copyable" lang="bash">http://image-demo.oss-cn-hangzhou.aliyuncs.com/example.jpg?x-oss-process=image/crop,x_100,y_50
<span class="copy-code-btn">复制代码</span></code></pre><p>在前端嗅探上，一般我们可以嗅探 是否支持 webp、客户端分辨率、当前网络状况，去全局设置不同的图片加载 URL。</p>
<p>base64、</p>
<p><a name="8552135f"></a></p>
<h4 class="heading" data-id="heading-5">1.4 不要展示 “绝对Loading / 占位”</h4>
<p>当前时代，大部分网页的数据都是动态下发的，甚至千人前面，为了减少用户等待的焦灼感，往往会设置一个 Loading 动画或者 骨骼图占位。但当请求响应足够快的时候，会发现这种 Loading 或 占位 却会给人相反的感觉 —— 瞬间的闪动。</p>
<p>针对这种情况，在使用 Loading 或骨骼图占位的，可以做一定的优化，比如请求发起后 200ms 以上还未返回数据才展示占位图。在 React Suspense 中，为了这种效果官方甚至加了一个 API。</p>
<p><a name="e1e915f8"></a></p>
<h4 class="heading" data-id="heading-6">1.5 资源 combo</h4>
<p>在 HTTP 请求中，请求创建往往因为 TCP 三次握手等会有一个非常大的开销。涉想在 HTTP 1.0 时代，如果页面上有 50 个 Script 标签，会有 50 次的请求创建，在资源不是那么大的情况下，请求创建的耗时往往会远大于资源真正的下载时间。</p>
<p>在服务端做资源 Combo，然后再往 CDN 回源，就能很大程序上减少这种开销。</p>
<pre><code class="hljs bash copyable" lang="bash">xx.com/a.js
xx.com/b.js
xx.com/c.js
xx.com/d.js

xx.com/combo?a.js,b.js,c.js,c.js
<span class="copy-code-btn">复制代码</span></code></pre><blockquote>
<p>在 HTTP 2.0 时代资源要不要 Combo + 多少个资源（多大的体积）Combo 到一起 是个有意思的话题，这里不做讨论。</p>
</blockquote>
<p><a name="cd04fb7f"></a></p>
<h4 class="heading" data-id="heading-7">1.6 在线 Shim</h4>
<p>前端因为浏览器问题一直存在店铺这种东西，有很多的特性往往在新的浏览器版本里面已经支持，但奈何老的不支持需要做垫片。如果对代码统一加垫片则又会让新浏览器很尴尬（我要这新特性有何用？），使用在线的 Shim 应该是一个不错的 Shim。</p>
<p>比如著名的 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fpolyfill.io%2Fv3%2Furl-builder%2F%25EF%25BC%258C" rel="nofollow noopener noreferrer">polyfill.io/v3/url-buil…</a> 就是一个这样的服务。在支持 <code>Object.assign</code> 中访问 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fpolyfill.io%2Fv3%2Fpolyfill.min.js%3Ffeatures%3DObject.assign" rel="nofollow noopener noreferrer">polyfill.io/v3/polyfill…</a> ， 会得到：</p>
<pre><code class="hljs bash copyable" lang="bash">/* Disable minification (remove `.min` from URL path) <span class="hljs-keyword">for</span> more info */
<span class="copy-code-btn">复制代码</span></code></pre><p>而在不支持的浏览器中访问，会得到：</p>
<pre><code class="hljs bash copyable" lang="bash">(<span class="hljs-keyword">function</span>(undefined) {<span class="hljs-keyword">if</span> (!(// In IE8, defineProperty could only act on DOM elements, so full support
// <span class="hljs-keyword">for</span> the feature requires the ability to <span class="hljs-built_in">set</span> a property on an arbitrary object
<span class="hljs-string">'defineProperty'</span> <span class="hljs-keyword">in</span> Object &amp;&amp; (<span class="hljs-function"><span class="hljs-title">function</span></span>() {
	try {
		var a = {};
		Object.defineProperty(a, <span class="hljs-string">'test'</span>, {value:42});
		<span class="hljs-built_in">return</span> <span class="hljs-literal">true</span>;
	} catch(e) {
		<span class="hljs-built_in">return</span> <span class="hljs-literal">false</span>
	}
}()))) {!<span class="hljs-keyword">function</span>(e){
...
<span class="copy-code-btn">复制代码</span></code></pre><p>在国内也有这样的服务，比如：<a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fpolyfill.alicdn.com%2Fpolyfill.min.js%3Ffeatures%3DObject.assign" rel="nofollow noopener noreferrer">polyfill.alicdn.com/polyfill.mi…</a> ，如果你觉得不够信赖，可以自建然后部署在 CDN 上。</p>
<p><a name="f2933552"></a></p>
<h4 class="heading" data-id="heading-8">1.7 分离静态资源</h4>
<p>在绝大多数情况下，访问静态资源的时候并不需要知道 Cookie 信息，为静态资源使用一个新的域名能有效避免用不着的 Cookie 上传，能减少一部分无用流量的传输。</p>
<p><a name="d167bf69"></a></p>
<h4 class="heading" data-id="heading-9">1.8 使用 requestAnimationFrame 实现 60 FPS 动画</h4>
<p>在绘制动画的时候，优先使用 requestAnimationFrame，会充分利用分利用显示器的刷新机制，实现 60 FPS 的感觉。</p>
<p><a name="0c445632"></a></p>
<h4 class="heading" data-id="heading-10">1.9 节流 &amp; 防抖</h4>
<p>在 Web 中，像 Scroll 这种事件，在界面操作中触发的频率是非常之高的。涉想这样的一种场景：用户往下滑动网页，当滑动距离超过 1000px 的时候，右下角展现一个 回到顶部 的按钮。想当然的操作就是监听 Scroll 事件，当值大于 1000px 的时候展示 按钮，但因为 Scroll 的高频率触发，尤其在移动端这样做就能感觉到比较明显的性能问题了，如果我们对其加个操作 —— 1s 内检测函数只触发 1 次 或者在用户停下来的时候再去检测位置。这样页面整体就会流畅很多了，相对应的两个操作就是 节流 和 防抖。</p>
<p>在 Web 开发过程中，对于这种高频次触发的事情，合理的进程节流和防抖能在很大程度上增加页面流产度。</p>
<p><a name="780acd57"></a></p>
<h4 class="heading" data-id="heading-11">1.10 使用新版本 JavaScript</h4>
<p>一般情况下，V8 等 JavaScript 的 Runtime 都会对新特性有优化，在新浏览器上使用 Babel 转化后的代码难免会有一定的浪费与可惜。在新浏览器上使用新预发，老浏览器上使用老语法，才是比较好姿势。</p>
<p>实现上一种思路就是在线 Shim；第二种思路是正对先加载 seed 再加载 bundle 代码，可以在加载 bundle 之前做一个知否支持新版本 ES 的判断（比如是否支持 async 函数），然后再加载相应的 Bundle。</p>
<p><a name="f9c8fdfc"></a></p>
<h4 class="heading" data-id="heading-12">1.11 性能测量</h4>
<p><code>window.performace</code>&nbsp;能展示绝大多数检测 Web 性能的指标，在业务代码中埋点收集 window.performance 的值，可以为网页性能短板做很好的测量与统计。</p>
<p><a name="3d5515ad"></a></p>
<h4 class="heading" data-id="heading-13">1.12 善用 LocalStorage</h4>
<p>在一些场景下，每次用户进入时数据的变化不会太大，比如不怎么更新的个人博客页面。这个时候就可以使用 LocalStorage 去做 HTML 的缓存，页面进入的时候直接从 Storage 中获取缓存，然后 append 到页面上，等接口数据回来之后，再 Diff 做更新。</p>
<p>在新版本浏览器中，可以用 indexedDB 等代替 LocalStorage。</p>
<p><a name="fc4a524f"></a></p>
<h4 class="heading" data-id="heading-14">1.13 组件级缓存</h4>
<p>在 SPA 网站中，加载 bundle 大致上可以分为两份：</p>
<ol>
<li>所有的组件代码和业务代码打到一起，和业务代码一起输出</li>
<li>组件代码在组件内部各自打包，业务代码打包的时候 external 掉组件代码，最后 combo 到一起输出。</li>
</ol>
<p>针对第二种情况，可以利用 LocalStorage 等单独缓存组件代码（带上版本号），在端侧实现一个 Combo 的机制（有 Cache 取 Cache，没 Cache Fetch），这样一来，就能让一个网站的多个页面享受同份缓存，让之第一次也能非常快速的访问。</p>
<p><a name="fb6292c7"></a></p>
<h4 class="heading" data-id="heading-15">1.14 GZIP &amp; BBR</h4>
<p>GZIP 压缩使用 <a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Frccoder%2Fblog%2Fissues%2F32" rel="nofollow noopener noreferrer">Deflate</a> 能有效压缩文本资源的大小，在现代浏览器中，对 GZIP 的支持也是非常良好。值的注意的是，GZIP 的压缩并不是压的越小越好，太小会产生压缩性能的问题。</p>
<p>传统 TCP 使用的是基于丢包的拥塞控制算法，但并不是所有的丢包都是网络堵塞所导致的，为此 Google 开发了 BBR 拥塞控制算法，能有效提升服务器的吞吐量，如果服务器支持的话，可以开启 BBR 来加快网络传输。</p>
<p><a name="daeb6aed"></a></p>
<h4 class="heading" data-id="heading-16">1.15 Service Worker</h4>
<p>Service Worker 本质上充当Web应用程序与浏览器之间的代理服务器，利用 Service Worker 可以极致的控制每个请求，进而可以对 Web APP 在浏览器上做离线处理。</p>
<p>传说中的 PWA 就是对这个东西的一个极致应用。</p>
<p><a name="ef04d79d"></a></p>
<h4 class="heading" data-id="heading-17">1.16 WebWorker</h4>
<p>WebWorker 为 JavaScript 在浏览器中多线程调用提供了能力，可以让主线程创建 Worker 线程，针对一些密集计算或者需要时间比较高的场景，是非常有效的。比如：网页版邮箱附件上传等。</p>
<p><a name="39872452"></a></p>
<h2 class="heading" data-id="heading-18">二、外探于自建容器</h2>
<p><a name="acd5576e"></a></p>
<h4 class="heading" data-id="heading-19">2.1 WKWebview</h4>
<p>从 iOS8 开始，iOS 提供了 WKWebview 来代替 UIWebview。相比于 UIWebview，在性能和内存控制上都有非常大的提升，当然问题也是有的，比如 Cookie 同步问题等，但坑总能趟过去。</p>
<p>回到优点上，WKWebview 给前端最直接的体验莫过于 “Scroll 终于不再需要滚动停止下来才能触发了”，进而 LoadMore 等会更加的流畅。</p>
<p><a name="1ff97555"></a></p>
<h4 class="heading" data-id="heading-20">2.2 Webviw 内核内置</h4>
<p>Android 的碎片化一直是一个很严重的问题，即使是在今天。通过内置高性能的 Webview（比如 U4、X5）等，会为整个 APP Web 页面提速不少，在兼容性方面，也会好很多。</p>
<p><a name="8e539f7f"></a></p>
<h4 class="heading" data-id="heading-21">2.3 资源 Cache</h4>
<p>要实现页面秒开效果，Cache 肯定是第一优先级，通过下发离线包，让页面上的资源（HTML，CSS）离线，就可以很大程度上提升页面的性能。</p>
<p>在离线体系建设上，主要有两点需要考虑：1. 离线如果能快速下发，快速覆盖新版本 2. 前端如何才能无感知接入离线体系。</p>
<p>针对第一个问题，往往采取推+拉结合的方式；针对第二个问题，在实现的时候采用拦截网络的策略，就可以避免前端对离线的感知了</p>
<p><a name="423c36f1"></a></p>
<h4 class="heading" data-id="heading-22">2.4 代理请求</h4>
<p>如前文所述，创建一个 HTTP 请求是非常耗时的，从客户端的角度来看，是可以去优化这种请求的，比如被广泛使用的 Spidy。</p>
<p>在 WebAPP 中，发出一个数据请求，让走容器的通过而非 WebView 的通道，不仅有机会能让速度变快，同时还可以进行相应的加密，让抓包者懵逼。</p>
<p><a name="64de49b9"></a></p>
<h4 class="heading" data-id="heading-23">2.5 数据预加载</h4>
<p>试想一个网页的加载过程，加载 HTML -&gt; 加载 JS -&gt; 执行 JS -&gt; 请求数据 -&gt; 再次渲染。请求数据的流程是比较靠后的，在 WebAPP 中，如果能让这个请求或者请求到的数据提前，则会进一步提升网页速度。</p>
<p>一个比较常用的方式是往客户端下发一份配置，标识 页面地址、请求入参、缓存时间等信息，让客户端在访问这个 URL 的时候去加载数据，等前端代码真正请求的时候，直接拿客户端提前请求到的数据；或者说在前一个页面调用接口通知客户端去请求相关的接口。</p>
<p>目前这种做法应用比较广泛，比如：微信公众号，UC Feed 流等。</p>
<p><a name="7e3e053f"></a></p>
<h4 class="heading" data-id="heading-24">2.6 阉割版 WebView</h4>
<p>WebView 因为各种历史原因，“慢” 一直徘徊在他的左右。去定制 WebView，甚至去实现一层上层 DSL，只保存比较优秀的部分，也能在限制部分场景的同时去提升页面性能。</p>
<p>最典型的设计就是微信小程序了，阉割版的 WebView + Cache 机制，很难让人会觉得这是一个 WebAPP</p>
<p><a name="5e0291a7"></a></p>
<h4 class="heading" data-id="heading-25">2.7 Weex/React Native</h4>
<p>Weex/RN 相比于阉割版 WebView，是一个更加激进的优化访问。核心原理是自己造一个高性能的 Runtime，和客户端高度配置，由 JS Bundle 去 call native，用 Native 的方式去渲染页面。</p>
<p>同时对于 Web 上性能上有问题的部分，可以用传入表达式的方式让 Native 去执行。比如注明的 BindingX，就是传入一个表达式，然后去客户端去执行这个表达式，进而避免了频繁 call native 的问题，这样就可以保证动画的流畅运行了。</p>
<p><a name="3c19391c"></a></p>
<h4 class="heading" data-id="heading-26">2.8 Flutter</h4>
<p>...</p>
<p>原文地址：<a target="_blank" href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Frccoder%2Fblog%2Fissues%2F34" rel="nofollow noopener noreferrer">github.com/rccoder/blo…</a> 。</p>
</div></article><div data-v-4a12c3f3="" data-v-4b868639="" class="tag-list-box"><div data-v-4a12c3f3="" data-v-4b868639="" class="tag-list-title">关注下面的标签，发现更多相似文章</div><div data-v-4a12c3f3="" data-v-4b868639="" st:block="tagList" class="tag-list"><a data-v-4a12c3f3="" href="https://juejin.im/tag/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" target="_blank" rel="" st:name="tag" class="item" data-v-4b868639=""><div data-v-acf63380="" data-v-21eddaa6="" data-v-4a12c3f3="" data-src="https://user-gold-cdn.xitu.io/1552374613638f172b668f237482fee67f11b7ac8c181.jpg?imageView2/2/w/42/h/42/q/85/format/webp/interlace/1" class="lazy thumb tag-icon loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/1552374613638f172b668f237482fee67f11b7ac8c181.jpg?imageView2/2/w/42/h/42/q/85/format/webp/interlace/1&quot;); background-size: contain;"></div><div data-v-4a12c3f3="" class="tag-title">性能优化</div></a></div></div><a data-v-4a12c3f3="" href="https://juejin.im/user/57599573df0eea00646b12ae" target="_blank" rel="" data-v-4b868639=""><div data-v-4a12c3f3="" class="footer-author-block"><div data-v-ac159f2a="" data-v-4a12c3f3="" itemscope="itemscope" itemtype="http://schema.org/Person" class="author"><div itemprop="memberOf" itemscope="itemscope" itemtype="http://schema.org/Organization"></div><div data-v-ac159f2a="" class="author-info-block"><a data-v-ac159f2a="" href="https://juejin.im/user/57599573df0eea00646b12ae" target="_blank" rel="" class="avatar-link"><div data-v-acf63380="" data-v-37d9a154="" data-v-ac159f2a="" data-src="https://mirror-gold-cdn.xitu.io/168e082b07ab973ff68?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://mirror-gold-cdn.xitu.io/168e082b07ab973ff68?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a><div data-v-ac159f2a="" class="author-info-box"><div data-v-ac159f2a="" class="profile-box"><a data-v-ac159f2a="" href="https://juejin.im/user/57599573df0eea00646b12ae" target="_blank" rel="" class="username ellipsis">rccoder</a><span data-v-ac159f2a="" class="position ellipsis">前端开发工程师 @ 飞猪-阿里巴巴旗下旅游网站</span></div><div data-v-ac159f2a="" class="meta-box"><a data-v-ac159f2a="" href="https://juejin.im/user/57599573df0eea00646b12ae/posts" target="_blank" rel="" class="posts"><span data-v-ac159f2a="" class="count post-count">发布了 7 篇专栏 · </span></a><span data-v-ac159f2a="" class="count">获得点赞 2,743 · </span><span data-v-ac159f2a="" class="count">获得阅读 54,950</span></div></div><button data-v-2fe230ac="" data-v-ac159f2a="" class="follow-button follow">关注</button></div></div></div></a><div data-v-4a12c3f3="" data-v-4b868639="" st:block="banner" class="article-banner"><a data-v-4a12c3f3="" data-v-4b868639="" st:name="link" st:state="https://juejin.im/extension/?utm_source=juejin.im&amp;utm_medium=post&amp;utm_campaign=extension_promotion" class="banner-title" href="https://juejin.im/extension/?utm_source=juejin.im&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">安装掘金浏览器插件</a><div data-v-4a12c3f3="" data-v-4b868639="" class="banner-content">打开新标签页发现好内容，掘金、GitHub、Dribbble、ProductHunt 等站点内容轻松获取。快来安装掘金浏览器插件获取高质量内容吧！</div></div><!----><!----><div data-v-f227228a="" data-v-4a12c3f3="" class="comment-list-box" id="comment-box" data-v-4b868639=""><div data-v-f227228a="" class="title">评论</div><div data-v-ec19aada="" data-v-f227228a="" class="comment-form comment-form"><div data-v-ec19aada="" class="avatar-box"><div data-v-acf63380="" data-v-37d9a154="" data-v-ec19aada="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-avatar.e30559a.svg" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-avatar.e30559a.svg&quot;);"></div></div><div data-v-ec19aada="" class="form-box"><div data-v-ec19aada="" class="input-box"><div data-v-ec19aada="" contenteditable="true" spellcheck="false" placeholder="输入评论..." class="rich-input empty"><br data-v-ec19aada=""></div><!----></div><!----></div></div><div data-v-b15cf724="" data-v-f227228a="" class="comment-list comment-list"><div data-v-1090d892="" data-v-b15cf724="" class="image-viewer-box"><!----></div><div data-v-b15cf724="" class="item"><div data-v-7a3ef47a="" data-v-b15cf724="" class="comment comment"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5b47f8846fb9a04fe25ebf7f" class="user-popover-box popover"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5b47f8846fb9a04fe25ebf7f" target="_blank" rel="" class="user-link" data-v-6e26702a=""><div data-v-acf63380="" data-v-37d9a154="" data-v-7a3ef47a="" data-src="https://user-gold-cdn.xitu.io/2019/4/10/16a054a92c9f928e?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/4/10/16a054a92c9f928e?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-7a3ef47a="" class="content-box comment-divider-line"><div data-v-7a3ef47a="" class="meta-box"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5b47f8846fb9a04fe25ebf7f" class="user-popover-box"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5b47f8846fb9a04fe25ebf7f" target="_blank" rel="" class="username ellipsis" data-v-6e26702a="">mimittqq<!----></a></div><div data-v-7a3ef47a="" class="position">fe @ bytedance</div></div><div data-v-7a3ef47a="" class="content">干货很多 马上关注了 大佬能问下组件级缓存具体怎么做吗？</div><div data-v-7a3ef47a="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-7a3ef47a="" class="reply-stat"><time data-v-7a3ef47a="" datetime="2019-03-25T00:41:07.212Z" title="Mon Mar 25 2019 08:41:07 GMT+0800 (中国标准时间)" class="time">1月前</time><div data-v-7a3ef47a="" class="action-box"><div data-v-7a3ef47a="" class="like-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><!----></div><div data-v-7a3ef47a="" class="comment-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-7a3ef47a="" class="action-title">回复</span></div></div></div><!----><div data-v-7eda734a="" data-v-7a3ef47a="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div><div data-v-b15cf724="" class="item"><div data-v-7a3ef47a="" data-v-b15cf724="" class="comment comment"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5b47f8846fb9a04fe25ebf7f" class="user-popover-box popover"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5b47f8846fb9a04fe25ebf7f" target="_blank" rel="" class="user-link" data-v-6e26702a=""><div data-v-acf63380="" data-v-37d9a154="" data-v-7a3ef47a="" data-src="https://user-gold-cdn.xitu.io/2019/4/10/16a054a92c9f928e?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/4/10/16a054a92c9f928e?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-7a3ef47a="" class="content-box comment-divider-line"><div data-v-7a3ef47a="" class="meta-box"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5b47f8846fb9a04fe25ebf7f" class="user-popover-box"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5b47f8846fb9a04fe25ebf7f" target="_blank" rel="" class="username ellipsis" data-v-6e26702a="">mimittqq<!----></a></div><div data-v-7a3ef47a="" class="position">fe @ bytedance</div></div><div data-v-7a3ef47a="" class="content">干货很多 马上关注了 大佬能问下组件级缓存具体怎么做吗？</div><div data-v-7a3ef47a="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-7a3ef47a="" class="reply-stat"><time data-v-7a3ef47a="" datetime="2019-03-25T00:41:07.069Z" title="Mon Mar 25 2019 08:41:07 GMT+0800 (中国标准时间)" class="time">1月前</time><div data-v-7a3ef47a="" class="action-box"><div data-v-7a3ef47a="" class="like-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><!----></div><div data-v-7a3ef47a="" class="comment-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-7a3ef47a="" class="action-title">回复</span></div></div></div><!----><div data-v-7eda734a="" data-v-7a3ef47a="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div><div data-v-b15cf724="" class="item"><div data-v-7a3ef47a="" data-v-b15cf724="" class="comment comment"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5be226406fb9a049d518f538" class="user-popover-box popover"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5be226406fb9a049d518f538" target="_blank" rel="" class="user-link" data-v-6e26702a=""><div data-v-acf63380="" data-v-37d9a154="" data-v-7a3ef47a="" data-src="https://mirror-gold-cdn.xitu.io/168e095d42aa339590f?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://mirror-gold-cdn.xitu.io/168e095d42aa339590f?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-7a3ef47a="" class="content-box comment-divider-line"><div data-v-7a3ef47a="" class="meta-box"><div data-v-6e26702a="" data-v-7a3ef47a="" st:block="userPopover" st:state="5be226406fb9a049d518f538" class="user-popover-box"><!----><a data-v-7a3ef47a="" href="https://juejin.im/user/5be226406fb9a049d518f538" target="_blank" rel="" class="username ellipsis" data-v-6e26702a="">热情的刘大爷<!----></a></div><div data-v-7a3ef47a="" class="position">web前端</div></div><div data-v-7a3ef47a="" class="content">前两天刚写的Performance工具和api的文章，还有一个小demo，希望大佬指点一下<img class="emoji" draggable="false" alt="🙏" src="assets/1557109330-68b498b4df7b9bc1c7bec3b444e1058d.svg">

链接：<a href="https://link.juejin.im/?target=https%3A%2F%2Fjuejin.im%2Fentry%2F5c93602c5188252db7569a98" class="parse-emoji-url" style="color: #027fff" title="https://juejin.im/entry/5c93602c5188252db7569a98" target="_blank" rel="nofollow noopener noreferrer"><img alt="https://juejin.im/entry/5c93602c5188252db7569a98" style="vertical-align: sub" draggable="false" src="assets/1557109330-e92a525a55685a511ea5664bd9a696a7.svg">juejin.im/entry/5c93602c...</a></div><div data-v-7a3ef47a="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-7a3ef47a="" class="reply-stat"><time data-v-7a3ef47a="" datetime="2019-03-24T14:48:56.786Z" title="Sun Mar 24 2019 22:48:56 GMT+0800 (中国标准时间)" class="time">1月前</time><div data-v-7a3ef47a="" class="action-box"><div data-v-7a3ef47a="" class="like-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><!----></div><div data-v-7a3ef47a="" class="comment-action action"><svg data-v-7a3ef47a="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-7a3ef47a="" fill="none" fill-rule="evenodd"><path data-v-7a3ef47a="" d="M0 0h20v20H0z"></path> <path data-v-7a3ef47a="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-7a3ef47a="" class="action-title">回复</span></div></div></div><!----><div data-v-7eda734a="" data-v-7a3ef47a="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div></div><!----></div></div></DIV></MAIN></DIV></DIV>
      
        <hr />
        <!-- clipping information -->
        <div class="clipping-information">
          <label>原网址: <a href="https://juejin.im/post/5c95ee3bf265da610a56ef9a" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">访问</a></label><br />
          <label>创建于: 2019-05-06 10:22:10</label><br />
          <label>目录: default</label><br />
          <label>标签: 无</label>
        </div>
    </div>
  </body>
</html>